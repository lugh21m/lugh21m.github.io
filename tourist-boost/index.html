<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tourist Visibility Boost — lugh21</title>
  <meta name="description" content="Get a 30-second recommendation to improve your Google Maps presence and win tourist customers." />
  <meta name="robots" content="noindex,nofollow" />
  <link rel="canonical" href="https://lugh21.com/tourist-boost/" />
  <meta property="og:title" content="Tourist Visibility Boost — lugh21" />
  <meta property="og:description" content="Choose a quick path or see packages. Get a 30-second Maps recommendation without ads." />
  <meta property="og:image" content="/tourist-boost/assets/listing-comparison.svg" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Sora:wght@500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #ffffff;
      --text: #0f172a;
      --muted: #5b6470;
      --accent: #2b6cff;
      --accent-dark: #2155e6;
      --accent-soft: #edf3ff;
      --border: #e5e7eb;
      --card: #ffffff;
      --highlight: rgba(43, 108, 255, 0.14);
      --shadow: 0 24px 40px rgba(15, 23, 42, 0.12);
      --shadow-soft: 0 12px 24px rgba(15, 23, 42, 0.08);
      --font-body: "Manrope", "Segoe UI", "Helvetica Neue", sans-serif;
      --font-display: "Sora", "Segoe UI", "Helvetica Neue", sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: var(--font-body);
      color: var(--text);
      background: radial-gradient(1200px 520px at 15% -10%, #eef4ff 0%, #ffffff 55%), var(--bg);
      -webkit-font-smoothing: antialiased;
    }
    h1, h2, h3 { margin: 0; letter-spacing: -0.02em; font-family: var(--font-display); }
    h2 { font-size: 28px; line-height: 1.2; font-weight: 700; }
    h3 { font-size: 18px; line-height: 1.3; font-weight: 700; }
    p { margin: 0; }
    a { color: inherit; }
    .container { max-width: 1080px; margin: 0 auto; padding: 32px; }
    .reveal { animation: fadeUp 0.7s ease both; }
    .reveal-delay-1 { animation-delay: 0.08s; }
    .reveal-delay-2 { animation-delay: 0.16s; }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (prefers-reduced-motion: reduce) {
      .reveal { animation: none; }
    }
    .site-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #f1f5f9;
    }
    .site-logo { font-weight: 700; font-size: 17px; text-decoration: none; color: var(--text); }
    .header-right { display: flex; align-items: center; gap: 12px; }
    .site-title { font-weight: 600; font-size: 13px; color: var(--muted); letter-spacing: 0.08em; text-transform: uppercase; }

    .hero { display: flex; gap: 36px; margin-top: 32px; align-items: flex-start; }
    .hero-copy { flex: 1; min-width: 260px; max-width: 560px; }
    .hero-copy h1 { font-size: 40px; line-height: 1.12; font-weight: 700; }
    .lead { margin-top: 16px; font-size: 18px; line-height: 1.5; color: var(--muted); }
    .subline { margin-top: 12px; font-size: 15px; color: var(--muted); }

    .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 20px; box-shadow: var(--shadow-soft); }
    .entry-card {
      width: 380px;
      border: 1px solid #dbe2ee;
      background: linear-gradient(180deg, #f6f9ff 0%, #ffffff 60%);
      box-shadow: var(--shadow);
      position: relative;
    }
    .entry-kicker {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      border: 1px solid #dbe6ff;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 10px;
    }
    .entry-card h2 { font-size: 20px; font-weight: 700; }
    .entry-intro { margin-top: 8px; font-size: 14px; color: var(--muted); }
    .entry-buttons { display: grid; gap: 12px; margin-top: 16px; }
    .entry-btn {
      border-radius: 12px;
      border: 1px solid #dbe2ee;
      background: #ffffff;
      padding: 14px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 6px;
      transition: border-color 0.15s ease, box-shadow 0.15s ease;
    }
    .entry-btn:hover { border-color: var(--accent); box-shadow: 0 10px 20px rgba(37, 99, 235, 0.15); }
    .entry-btn.primary {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      border-color: transparent;
      color: #fff;
      box-shadow: 0 14px 26px rgba(37, 99, 235, 0.28);
    }
    .entry-btn.primary small { color: #dfe9ff; }
    .entry-btn.secondary { background: #f8fafc; border-color: #e2e8f0; color: var(--text); }
    .entry-btn small { font-size: 13px; font-weight: 500; color: var(--muted); }
    .trust-line { margin-top: 12px; font-size: 12px; color: var(--muted); }

    .section { margin-top: 52px; }
    .section-heading { margin-bottom: 14px; }
    .muted { color: var(--muted); }

    .wizard { padding: 0; overflow: hidden; border: 1px solid var(--border); box-shadow: var(--shadow); border-radius: 18px; }
    .wizard-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      background: #f5f7fb;
    }
    .step-indicator { display: flex; align-items: center; gap: 10px; font-size: 13px; color: var(--muted); font-weight: 600; }
    .step-dots { display: flex; gap: 6px; }
    .step-dot { width: 8px; height: 8px; border-radius: 999px; background: #d6dde7; }
    .step-dot.active { background: var(--accent); }
    .flow-controls { display: flex; gap: 10px; }
    .link-btn { background: none; border: none; font-weight: 600; color: var(--accent); cursor: pointer; padding: 0; }
    .link-btn[disabled] { color: #b9c4c9; cursor: not-allowed; }
    .wizard-body { padding: 20px; }
    .wizard-body h3 { font-size: 18px; font-weight: 700; }
    .prompt-hint { margin-top: 6px; font-size: 13px; font-weight: 600; color: var(--accent); }
    .choice-grid {
      display: grid;
      gap: 10px;
      margin-top: 16px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }
    .choice-btn {
      border-radius: 10px;
      border: 1px solid #e2e8f0;
      padding: 12px 14px;
      background: #ffffff;
      text-align: left;
      font-weight: 600;
      cursor: pointer;
      transition: border-color 0.15s ease, box-shadow 0.15s ease;
    }
    .choice-btn:hover { border-color: var(--accent); box-shadow: 0 8px 18px rgba(37, 99, 235, 0.12); }
    .choice-btn.is-selected { border-color: var(--accent); box-shadow: 0 0 0 2px var(--highlight); }
    .result-title { font-size: 22px; font-weight: 700; margin-top: 8px; }
    .result-list {
      list-style: none;
      padding: 0;
      margin: 14px 0 0;
      display: grid;
      gap: 8px;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.5;
    }
    .result-list li { display: flex; gap: 8px; }
    .result-list li::before { content: "•"; color: var(--accent); font-weight: 700; line-height: 1; }
    .cta-row { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 18px; align-items: center; }
    .cta-links { display: inline-flex; gap: 16px; align-items: center; flex-wrap: wrap; }
    .cta-link { font-size: 14px; font-weight: 600; color: var(--text); text-decoration: none; }
    .cta-link:hover { color: var(--accent); }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 16px;
      border-radius: 12px;
      font-weight: 600;
      text-decoration: none;
      border: 1.5px solid #d7dde7;
      color: var(--text);
      background: #ffffff;
      box-shadow: var(--shadow-soft);
    }
    .btn.primary {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      color: #fff;
      border-color: transparent;
      box-shadow: 0 16px 28px rgba(37, 99, 235, 0.25);
    }
    .copy-box { margin-top: 16px; display: grid; gap: 8px; }
    .copy-box textarea {
      width: 100%;
      min-height: 120px;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
      padding: 10px;
      font-family: inherit;
      font-size: 13px;
      color: #374151;
      background: #f8fafc;
      resize: vertical;
    }
    .copy-status { font-size: 12px; color: var(--muted); min-height: 16px; }
    .text-link { color: var(--accent); text-decoration: none; font-weight: 600; display: inline-flex; margin-top: 10px; }
    .inline-link { color: var(--accent); text-decoration: none; font-weight: 600; }
    .inline-link:hover { color: var(--accent-dark); }

    .packages-grid, .features-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(3, 1fr);
      margin-top: 14px;
    }
    .feature-card { display: grid; gap: 10px; }
    .feature-icon {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: #f1f5f9;
      border: 1px solid #e2e8f0;
      display: grid;
      place-items: center;
      color: var(--accent);
    }
    .feature-icon svg { width: 22px; height: 22px; stroke: currentColor; fill: none; stroke-width: 2; }
    .package-card { position: relative; }
    .package-card h3 { padding-right: 96px; }
    .badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #f1f5f9;
      color: #1f2937;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #e2e8f0;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }
    .price { margin-top: 10px; font-size: 22px; color: var(--text); font-weight: 700; }
    .package-list { margin: 12px 0 0; padding-left: 16px; color: var(--muted); display: grid; gap: 6px; }
    .package-meta { margin-top: 12px; color: var(--muted); font-size: 13px; display: grid; gap: 4px; }
    .package-meta strong { color: var(--text); font-weight: 600; }
    .package-note { display: none; font-size: 12px; font-weight: 700; color: var(--accent); margin-bottom: 6px; }
    .package-card.is-highlight { border-color: var(--accent); box-shadow: 0 0 0 3px var(--highlight), var(--shadow-soft); }
    .package-card.show-after .package-note { display: block; }

    .final-cta { margin-bottom: 24px; }
    footer { margin-top: 40px; color: var(--muted); font-size: 14px; }

    @media (max-width: 960px) {
      .hero { flex-direction: column; }
      .entry-card { width: 100%; }
      .packages-grid, .features-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 640px) {
      .container { padding: 20px; }
      .hero-copy h1 { font-size: 30px; }
      .site-title { font-size: 11px; }
      .cta-row { flex-direction: column; align-items: stretch; }
    }
  </style>
  <script>
    window.TOURIST_BOOST_CONTACTS = {
      whatsapp: '491729175743',
      whatsappHref: 'https://wa.me/491729175743?text=Hey%20lugh21%20/%20please%20check%20my%20Google%20Maps%20profile',
      lineHref: 'https://line.me/ti/p/2Akbahv6V2',
      email: 'contact@lugh21.com'
    };
  </script>
</head>
<body>
  <div class="container">
    <header class="site-header">
      <a class="site-logo" href="/">lugh21.com</a>
      <div class="header-right">
        <span class="site-title">Tourist Visibility Boost</span>
      </div>
    </header>

    <main>
      <section class="hero" aria-label="Hero">
        <aside class="card entry-card reveal" aria-labelledby="entry-title">
          <div class="entry-kicker">Start here</div>
          <h2 id="entry-title">What do you want?</h2>
          <p class="entry-intro">Choose now to jump into the 30-sec check or see pricing.</p>
          <div class="entry-buttons">
            <button class="entry-btn primary" type="button" data-entry="flow">
              <span>Find my best option (30 sec)</span>
              <small>Answer 2-3 quick questions.</small>
            </button>
            <button class="entry-btn secondary" type="button" data-entry="pricing">
              <span>See packages &amp; pricing</span>
              <small>Quick overview.</small>
            </button>
          </div>
          <p class="trust-line">No ads / no long contracts / you keep full ownership.</p>
        </aside>
        <div class="hero-copy reveal reveal-delay-1">
          <h1>Turn your Maps presence into customers without ads.</h1>
          <p class="lead">Not on Google Maps yet or looking empty there? Two clicks and you'll know what you need.</p>
          <p class="subline">Done-for-you setup in 2-7 days. Photos + positioning + review system included.</p>
        </div>
      </section>

      <section id="flow" class="section">
        <div class="section-heading">
          <h2>Get a recommendation in 30 seconds.</h2>
          <p class="muted">Choose what fits your situation. Then message me on LINE for a free 2-minute check.</p>
        </div>
        <div class="card wizard reveal reveal-delay-2" id="wizard" aria-live="polite">
          <div class="wizard-header">
            <div class="step-indicator">
              <span id="wizard-step-label">Step 1 of 3</span>
              <div class="step-dots" id="wizard-dots" aria-hidden="true"></div>
            </div>
            <div class="flow-controls">
              <button class="link-btn" type="button" data-action="back" id="wizard-back">Back</button>
              <button class="link-btn" type="button" data-action="reset" id="wizard-reset">Reset</button>
            </div>
          </div>
          <div class="wizard-body" id="wizard-body"></div>
        </div>
      </section>

      <section id="packages" class="section">
        <h2>Packages</h2>
        <p class="muted">Pick the shortest path to a convincing Maps presence.</p>
        <div class="packages-grid">
          <article class="card package-card" data-card="maps_setup">
            <span class="badge">Most common</span>
            <h3>Maps Setup</h3>
            <div class="price">9,900 THB</div>
            <p class="muted">One-time setup so tourists can find and trust you.</p>
            <ul class="package-list">
              <li>Pin, hours, and categories fixed</li>
              <li>Photos + English description that converts</li>
              <li>Review system (QR + staff script)</li>
            </ul>
            <div class="package-meta">
              <span><strong>Timeline:</strong> 2-7 days</span>
              <span><strong>Payment:</strong> 50% upfront / 50% after</span>
              <span><strong>Access:</strong> remote (Manager) or on-site on your phone</span>
              <span><strong>Photos:</strong> included = curate existing + shotlist / on-site photos = on request + travel</span>
            </div>
          </article>
          <article class="card package-card" data-card="monthly_care">
            <span class="badge">After Setup</span>
            <div class="package-note" aria-live="polite">Best after Setup</div>
            <h3>Ongoing Care (on request)</h3>
            <p class="muted">Want me to manage posts + replies + improvements regularly? Message me and I'll suggest a plan.</p>
          </article>
          <article class="card package-card">
            <h3>2-minute Maps check</h3>
            <div class="price">Free</div>
            <p class="muted">Quick review to confirm what's missing.</p>
            <div class="cta-row">
              <a class="btn primary line-link" href="https://line.me/ti/p/2Akbahv6V2" target="_blank" rel="noopener noreferrer">LINE check</a>
            </div>
          </article>
        </div>
        <p class="muted" style="margin-top:12px;">Need a quick fix right now? <a class="inline-link" href="/tourist-boost/now">/tourist-boost/now</a></p>
      </section>

      <section class="section" aria-label="Proof">
        <h2>Proof it works for tourists</h2>
        <div class="features-grid">
          <article class="card feature-card">
            <div class="feature-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 21s6-5.5 6-11a6 6 0 10-12 0c0 5.5 6 11 6 11z"></path>
                <circle cx="12" cy="10" r="2.5"></circle>
              </svg>
            </div>
            <h3>Get Found</h3>
            <p class="muted">Show up for "near me", "open now", and category searches.</p>
          </article>
          <article class="card feature-card">
            <div class="feature-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="5" width="18" height="14" rx="2"></rect>
                <path d="M7 15l3-3 4 4 3-3 3 3"></path>
              </svg>
            </div>
            <h3>Get Chosen</h3>
            <p class="muted">Photos and English copy make you look active and credible.</p>
          </article>
          <article class="card feature-card">
            <div class="feature-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 4l2.5 5 5.5.8-4 3.9.9 5.6-4.9-2.6-4.9 2.6.9-5.6-4-3.9 5.5-.8z"></path>
              </svg>
            </div>
            <h3>Get Reviews</h3>
            <p class="muted">Simple QR flow makes happy guests leave proof every week.</p>
          </article>
        </div>
      </section>

      <section class="section final-cta" aria-label="Final call to action">
        <h2>Ready to start?</h2>
        <p class="muted">Message me on LINE for a free 2-minute check.</p>
        <div class="cta-row">
          <a class="btn primary line-link" href="https://line.me/ti/p/2Akbahv6V2" target="_blank" rel="noopener noreferrer">LINE</a>
          <div class="cta-links">
            <a class="cta-link whatsapp-link" href="https://wa.me/491729175743?text=Hey%20lugh21%20/%20please%20check%20my%20Google%20Maps%20profile" data-number="491729175743" target="_blank" rel="noopener noreferrer">WhatsApp</a>
            <a class="cta-link email-link" href="mailto:contact@lugh21.com">Email</a>
          </div>
        </div>
      </section>
    </main>

    <footer>
      © <span id="year"></span> lugh21 — Tourist Visibility Boost
    </footer>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const contacts = window.TOURIST_BOOST_CONTACTS || {};
    const defaultWhatsapp = contacts.whatsapp || '491729175743';
    const defaultWhatsappMessage = 'Hey lugh21 / please check my Google Maps profile';
    const whatsappHrefTemplate = contacts.whatsappHref
      || `https://wa.me/${defaultWhatsapp}?text=${encodeURIComponent(defaultWhatsappMessage)}`;
    const lineHref = contacts.lineHref || 'https://line.me/ti/p/2Akbahv6V2';
    const emailAddress = contacts.email || 'contact@lugh21.com';

    const wizardBody = document.getElementById('wizard-body');
    const stepLabel = document.getElementById('wizard-step-label');
    const stepDots = document.getElementById('wizard-dots');
    const backBtn = document.getElementById('wizard-back');
    const resetBtn = document.getElementById('wizard-reset');

    const flowState = {
      currentStep: 'maps_status',
      history: [],
      lastResultKey: null,
      answers: {
        maps_status: null,
        place: null,
        goal: null,
        issue: null,
        urgency: null,
        care: null
      }
    };

    const flowSteps = {
      maps_status: {
        question: 'Are you on Google Maps?',
        options: [
          { id: 'no_maps', label: "I'm not on Google Maps" },
          { id: 'weak_maps', label: "I'm on Google Maps but it looks weak" }
        ]
      },
      place: {
        question: 'What is your place?',
        options: [
          { id: 'cafe_restaurant', label: 'Cafe / Restaurant' },
          { id: 'bar_rooftop', label: 'Bar / Rooftop' },
          { id: 'hostel_hotel', label: 'Hostel / Hotel' },
          { id: 'other', label: 'Shop / Massage / Other' }
        ]
      },
      goal: {
        question: 'What do you want most?',
        options: [
          { id: 'directions', label: 'Directions / Walk-ins' },
          { id: 'calls', label: 'Calls / Bookings' },
          { id: 'launch_fast', label: 'Just be findable (launch fast)' }
        ]
      },
      issue: {
        question: 'What is the biggest issue?',
        options: [
          { id: 'wrong_info', label: 'Wrong info (hours / pin / phone)' },
          { id: 'no_photos', label: 'No photos / looks empty' },
          { id: 'no_reviews', label: 'No reviews / low rating' },
          { id: 'inactive', label: 'No posts / looks inactive' }
        ]
      },
      urgency: {
        question: 'How urgent is it?',
        options: [
          { id: 'this_week', label: 'This week' },
          { id: 'this_month', label: 'This month' },
          { id: 'planning', label: 'Just planning' }
        ]
      },
      care: {
        question: 'Do you want ongoing care after the fix?',
        options: [
          { id: 'one_time', label: 'No, one-time fix' },
          { id: 'monthly', label: 'Yes, ongoing care' }
        ]
      }
    };

    const resultBullets = {
      maps_setup: [
        "Fix your pin / hours / categories so you show up for 'near me' and 'open now'.",
        'Make your profile look alive: photos + high-converting English description.',
        'Add a review system (QR + staff script) so trust grows automatically.'
      ],
      setup_plus_monthly: [
        'We set everything up once, then keep it active with posts and improvements.',
        'Ongoing posts help you look open and current (events / specials).',
        'Ongoing review replies and small tweaks maintain trust.'
      ]
    };

    const issueEmphasis = {
      no_photos: 'Photos decide in 10 seconds.',
      wrong_info: "Wrong hours kills 'open now' visibility.",
      no_reviews: 'Reviews are the #1 trust signal.',
      inactive: "Posts = proof you're active."
    };

    function track(event, data) {
      if (window.plausible) {
        window.plausible(event, { props: data || {} });
      }
      if (window.dataLayer && Array.isArray(window.dataLayer)) {
        window.dataLayer.push({ event, ...(data || {}) });
      }
      console.info('[track]', event, data || {});
    }

    function buildWhatsappHref(number, message) {
      let href = whatsappHrefTemplate;
      if (href.includes('00000000')) {
        href = href.replace('00000000', number);
      }
      if (message) {
        const joiner = href.includes('?') ? '&' : '?';
        href = `${href}${joiner}text=${encodeURIComponent(message)}`;
      }
      return href;
    }

    function buildEmailHref(subject, message) {
      let href = `mailto:${emailAddress}?subject=${encodeURIComponent(subject)}`;
      if (message) {
        href += `&body=${encodeURIComponent(message)}`;
      }
      return href;
    }

    function applyContactLinks() {
      document.querySelectorAll('.line-link').forEach((a) => {
        a.setAttribute('href', lineHref);
        a.setAttribute('target', '_blank');
        a.setAttribute('rel', 'noopener noreferrer');
      });

      document.querySelectorAll('.whatsapp-link').forEach((a) => {
        const number = a.dataset.number || defaultWhatsapp;
        const message = a.dataset.message || '';
        const href = buildWhatsappHref(number, message);
        a.setAttribute('href', href);
        a.setAttribute('target', '_blank');
        a.setAttribute('rel', 'noopener noreferrer');
      });

      document.querySelectorAll('.email-link').forEach((a) => {
        const subject = a.dataset.subject || 'Tourist Visibility Boost';
        const message = a.dataset.message || '';
        const href = buildEmailHref(subject, message);
        a.setAttribute('href', href);
      });
    }

    function getStepOrder() {
      const path = flowState.answers.maps_status;
      if (path === 'weak_maps') {
        return ['maps_status', 'issue', 'urgency', 'care'];
      }
      return ['maps_status', 'place', 'goal'];
    }

    function updateStepIndicator() {
      const stepOrder = getStepOrder();
      const totalSteps = stepOrder.length;
      const currentIndex = flowState.currentStep === 'result'
        ? totalSteps
        : Math.max(1, stepOrder.indexOf(flowState.currentStep) + 1);

      stepLabel.textContent = flowState.currentStep === 'result'
        ? 'Recommendation'
        : `Step ${currentIndex} of ${totalSteps}`;

      stepDots.innerHTML = stepOrder.map((_, index) => {
        const active = index < currentIndex ? 'active' : '';
        return `<span class="step-dot ${active}"></span>`;
      }).join('');
    }

    function renderQuestion() {
      const step = flowSteps[flowState.currentStep];
      if (!step) {
        wizardBody.innerHTML = '';
        return;
      }

      const optionsHtml = step.options.map((option) => {
        const selected = flowState.answers[flowState.currentStep] === option.id ? 'is-selected' : '';
        return (
          `<button class="choice-btn ${selected}" type="button" data-step="${flowState.currentStep}" data-option="${option.id}">
            ${option.label}
          </button>`
        );
      }).join('');

      wizardBody.innerHTML = `
        <h3>${step.question}</h3>
        <p class="prompt-hint">Choose one to continue.</p>
        <div class="choice-grid">
          ${optionsHtml}
        </div>
      `;
    }

    function buildRecommendation() {
      const path = flowState.answers.maps_status;
      const care = flowState.answers.care;
      const resultKey = (path === 'weak_maps' && care === 'monthly') ? 'setup_plus_monthly' : 'maps_setup';
      const title = resultKey === 'setup_plus_monthly' ? 'Maps Setup + Ongoing Care' : 'Maps Setup';
      const emphasis = flowState.answers.issue && issueEmphasis[flowState.answers.issue];
      const bullets = resultBullets[resultKey].slice();
      if (emphasis) {
        bullets[0] = emphasis;
      }
      return { resultKey, title, bullets };
    }

    function buildMessage() {
      const path = flowState.answers.maps_status || '-';
      const issue = flowState.answers.issue || '-';
      const urgency = flowState.answers.urgency || '-';
      const goal = flowState.answers.goal || '-';
      const place = flowState.answers.place || 'paste link or name';

      return [
        'Hey lugh21 / I did the 30-sec check.',
        `Path: ${path}`,
        `Issue: ${issue}`,
        `Urgency: ${urgency}`,
        `I want: ${goal}`,
        `My place: ${place}`
      ].join('\n');
    }

    function highlightCards(mode) {
      const mapsCard = document.querySelector('[data-card="maps_setup"]');
      const monthlyCard = document.querySelector('[data-card="monthly_care"]');

      [mapsCard, monthlyCard].forEach((card) => {
        if (!card) return;
        card.classList.remove('is-highlight');
        card.classList.remove('show-after');
      });

      if (mode === 'maps' && mapsCard) {
        mapsCard.classList.add('is-highlight');
      }

      if (mode === 'both') {
        if (mapsCard) mapsCard.classList.add('is-highlight');
        if (monthlyCard) {
          monthlyCard.classList.add('is-highlight');
          monthlyCard.classList.add('show-after');
        }
      }
    }

    function renderResult() {
      const recommendation = buildRecommendation();
      const message = buildMessage();

      wizardBody.innerHTML = `
        <div class="result">
          <div class="muted">Recommended package</div>
          <div class="result-title">${recommendation.title}</div>
          <ul class="result-list">
            ${recommendation.bullets.map((bullet) => `<li>${bullet}</li>`).join('')}
          </ul>
          <div class="cta-row">
            <a class="btn primary line-link" href="${lineHref}" target="_blank" rel="noopener noreferrer">Message on LINE</a>
            <div class="cta-links">
              <a class="cta-link whatsapp-link" href="${whatsappHrefTemplate}" data-number="${defaultWhatsapp}">WhatsApp</a>
              <a class="cta-link email-link" href="mailto:${emailAddress}">Email</a>
            </div>
          </div>
          <div class="copy-box">
            <label for="flow-message" class="muted">Copy the message:</label>
            <textarea id="flow-message" readonly></textarea>
            <button class="btn" type="button" data-action="copy-message">Copy message</button>
            <span class="copy-status" id="copy-status" role="status" aria-live="polite"></span>
          </div>
          <a class="text-link" href="#packages" data-action="packages">See packages &amp; pricing</a>
        </div>
      `;

      highlightCards(recommendation.resultKey === 'setup_plus_monthly' ? 'both' : 'maps');

      if (flowState.lastResultKey !== recommendation.resultKey) {
        track('flow_result', { result: recommendation.resultKey });
        flowState.lastResultKey = recommendation.resultKey;
      }

      const emailCta = wizardBody.querySelector('.email-link');
      const messageBox = wizardBody.querySelector('#flow-message');

      if (emailCta) emailCta.dataset.message = message;
      if (messageBox) messageBox.value = message;

      applyContactLinks();

      const copyBtn = wizardBody.querySelector('[data-action="copy-message"]');
      const status = wizardBody.querySelector('#copy-status');

      if (copyBtn) {
        copyBtn.addEventListener('click', () => {
          track('copy_message_click');
          const text = message;
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text).then(() => {
              if (status) status.textContent = 'Message copied.';
            }).catch(() => {
              if (status) status.textContent = 'Copy failed. Please copy manually.';
            });
          } else {
            const temp = document.createElement('textarea');
            temp.value = text;
            document.body.appendChild(temp);
            temp.select();
            try {
              document.execCommand('copy');
              if (status) status.textContent = 'Message copied.';
            } catch (error) {
              if (status) status.textContent = 'Copy failed. Please copy manually.';
            }
            document.body.removeChild(temp);
          }
        });
      }
    }

    function renderWizard() {
      updateStepIndicator();
      backBtn.disabled = flowState.history.length === 0;
      if (flowState.currentStep === 'result') {
        renderResult();
      } else {
        renderQuestion();
      }
    }

    function getNextStep(stepId, optionId) {
      if (stepId === 'maps_status') {
        return optionId === 'no_maps' ? 'place' : 'issue';
      }
      if (stepId === 'place') return 'goal';
      if (stepId === 'goal') return 'result';
      if (stepId === 'issue') return 'urgency';
      if (stepId === 'urgency') return 'care';
      if (stepId === 'care') return 'result';
      return 'result';
    }

    function handleAnswer(stepId, optionId) {
      flowState.answers[stepId] = optionId;
      track('flow_step', { step_id: stepId, answer_id: optionId });

      if (stepId === 'maps_status') {
        if (optionId === 'no_maps') {
          flowState.answers.issue = null;
          flowState.answers.urgency = null;
          flowState.answers.care = null;
        } else {
          flowState.answers.place = null;
          flowState.answers.goal = null;
        }
      }

      flowState.history.push(stepId);
      flowState.currentStep = getNextStep(stepId, optionId);
      renderWizard();
    }

    function resetFlow() {
      flowState.currentStep = 'maps_status';
      flowState.history = [];
      flowState.lastResultKey = null;
      flowState.answers = {
        maps_status: null,
        place: null,
        goal: null,
        issue: null,
        urgency: null,
        care: null
      };
      highlightCards('none');
      renderWizard();
    }

    function goBack() {
      if (!flowState.history.length) return;
      flowState.currentStep = flowState.history.pop();
      renderWizard();
    }

    function scrollToSection(id) {
      const target = document.getElementById(id);
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    function startFlow() {
      resetFlow();
      scrollToSection('flow');
      const firstChoice = wizardBody.querySelector('.choice-btn');
      if (firstChoice) {
        firstChoice.focus({ preventScroll: true });
      }
    }

    function showPricing() {
      highlightCards('maps');
      scrollToSection('packages');
    }

    wizardBody.addEventListener('click', (event) => {
      const button = event.target.closest('button[data-step][data-option]');
      if (!button) return;
      handleAnswer(button.dataset.step, button.dataset.option);
    });

    backBtn.addEventListener('click', () => goBack());
    resetBtn.addEventListener('click', () => resetFlow());

    document.querySelectorAll('[data-entry="flow"]').forEach((button) => {
      button.addEventListener('click', () => {
        track('entry_click_flow');
        startFlow();
      });
    });

    document.querySelectorAll('[data-entry="pricing"]').forEach((button) => {
      button.addEventListener('click', () => {
        track('entry_click_pricing');
        showPricing();
      });
    });

    document.addEventListener('click', (event) => {
      const packagesLink = event.target.closest('[data-action="packages"]');
      if (packagesLink) {
        event.preventDefault();
        const mode = flowState.lastResultKey === 'setup_plus_monthly' ? 'both' : 'maps';
        highlightCards(mode);
        scrollToSection('packages');
      }

      if (event.target.closest('.line-link')) {
        track('cta_line_click');
      }
      if (event.target.closest('.whatsapp-link')) {
        track('cta_whatsapp_click');
      }
      if (event.target.closest('.email-link')) {
        track('cta_email_click');
      }
    });

    applyContactLinks();
    renderWizard();

    const params = new URLSearchParams(window.location.search);
    const start = params.get('start');
    if (start === 'flow') {
      startFlow();
    }
    if (start === 'pricing') {
      showPricing();
    }
  </script>
</body>
</html>
